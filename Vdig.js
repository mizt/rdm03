window.Vdig=function(t,i,e,a){void 0==e&&(e=30),this.width=t,this.height=i,this.fps=e,this.func=a,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=i,this.ctx=this.canvas.getContext("2d"),this.ctx.translate(this.width,0),this.ctx.scale(-1,1),this.isPlay=!1,this.isSupported=!1,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({video:{mandatory:{minWidth:t,maxWidth:t,minHeight:i,maxHeight:i,minFrameRate:e,maxFrameRate:e}},audio:!1},function(e){this.isSupported=!0;var a=window.URL||window.webkitURL;this.image=document.createElement("video"),this.image.autoplay=!0,this.image.width=t,this.image.height=i,this.image.addEventListener("canplay",function(){this.func&&this.func(),this.image.removeEventListener("canplay",arguments.callee,!0),this.image.play(),setInterval(function(){this.ctx.drawImage(this.image,0,0,this.width,this.height)}.bind(this),1e3/this.fps>>0),this.ctx.drawImage(this.image,0,0,this.width,this.height),this.isPlay=!0}.bind(this)),this.image.src=a.createObjectURL(e)}.bind(this),function(t){console.log(t),this.isSupported=!1}.bind(this)):this.isSupported=!1},window.Vdig.prototype.get=function(){return new Uint8Array(this.ctx.getImageData(0,0,this.width,this.height).data.buffer)};