<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet">
    <title>rdm03</title>
    <style>
     body,canvas#stage{width:100%;height:100%}body,html{height:100%}*{margin:0;padding:0;font-family:'PT Sans Narrow',sans-serif}body{overflow:hidden;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-webkit-font-smoothing:antialiased;cursor:default;color:#FDFDFD;background-color:#959595}canvas#stage{background-color:#959595}div.tableCell{position:absolute;z-index:9999;top:0;left:0}div.tableCell p{display:table-cell;text-align:center;vertical-align:middle;-webkit-transform:scale(.9,1);-moz-transform:scale(.9,1);-ms-transform:scale(.9,1);-o-transform:scale(.9,1);transform:scale(.9,1);font-kerning:none}
    </style>
  </head>
  <body>
    <canvas id="stage"></canvas>
    <script src="libs.js"></script>
    <script src="Vdig.js"></script>
    <script>
    var VIDEO_WIDTH=656,VIDEO_HEIGHT=368;!("innerText"in document.createElement("a"))&&"getSelection"in window&&(HTMLElement.prototype.__defineGetter__("innerText",function(){for(var e,t=window.getSelection(),n=[],i=0;i<t.rangeCount;i++)n[i]=t.getRangeAt(i);t.removeAllRanges(),t.selectAllChildren(this),e=t.toString(),t.removeAllRanges();for(var i=0;i<n.length;i++)t.addRange(n[i]);return e}),HTMLElement.prototype.__defineSetter__("innerText",function(e){this.innerHTML=e.replace(/\n/g,"<br />")}));var div=document.createElement("div");div.className="tableCell";var p=document.createElement("p");p.innerText="Requirements : Desktop Chrome / WebRTC",p.style.fontSize="38px";var onTextResize=function(){p.style.width=div.style.width=window.innerWidth+"px",p.style.height=div.style.height=window.innerHeight+"px"},tid=setInterval(onTextResize,66);onTextResize(),div.appendChild(p),document.body.appendChild(div);var size=VIDEO_WIDTH*VIDEO_HEIGHT<<2,buff=new Uint8Array(Module.HEAPU8.buffer,Module._malloc(size),size),size=VIDEO_WIDTH*VIDEO_HEIGHT<<2,buff=new Uint8Array(Module.HEAPU8.buffer,Module._malloc(size),size),vdig=new window.Vdig(VIDEO_WIDTH,VIDEO_HEIGHT,30,function(){setTimeout(function(){clearInterval(tid),document.body.removeChild(div);var e=document.getElementById("stage");e.width=VIDEO_WIDTH,e.height=VIDEO_HEIGHT,Module.cwrap("setup","void",["number","number"])(VIDEO_WIDTH,VIDEO_HEIGHT);var t=Module.cwrap("draw","void",["number"]),n=e.getContext("2d"),i=n.getImageData(0,0,VIDEO_WIDTH,VIDEO_HEIGHT);setInterval(function(){buff.set(vdig.get()),t(buff.byteOffset),i.data.set(buff),n.putImageData(i,0,0)},33)},1e3)});
    </script>
  </body>
</html>
