<!DOCTYPE html><html><head><meta charset="UTF-8"/><title>rdm03</title><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"/><style>body,html{height:100%}body,video{background-color:#000}canvas,video{vertical-align:bottom;opacity:0}.center,canvas{position:absolute}*{margin:0;padding:0;-webkit-user-select:none}html{overflow:auto}body{overflow:hidden;font-family:helvetica,arial,sans-serif;font-size:12px}canvas{left:0;top:0;z-index:0}.center{color:#CCC;z-index:9999;top:50%;left:50%;-webkit-transform:translateY(-50%) translateX(-50%);transform:translateY(-50%) translateX(-50%);padding:32px;border:1px solid #ccc;display:none}</style></head><body><script src="libs.js"></script><script>!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.crel=t()}(this,function(){function e(){var a,f=arguments,v=f[0],p=f[1],y=2,g=f.length,m=e[n];if(v=e[s](v)?v:l.createElement(v),1===g)return v;if((!c(p,i)||e[r](p)||h(p))&&(--y,p=null),g-y===1&&c(f[y],"string")&&void 0!==v[o])v[o]=f[y];else for(;g>y;++y)if(a=f[y],null!=a)if(h(a))for(var w=0;w<a.length;++w)u(v,a[w]);else u(v,a);for(var x in p)if(m[x]){var b=m[x];typeof b===t?b(v,p[x]):v[d](b,p[x])}else v[d](x,p[x]);return v}var t="function",i="object",a="nodeType",o="textContent",d="setAttribute",n="attrMap",r="isNode",s="isElement",l=typeof document===i?document:{},c=function(e,t){return typeof e===t},f=typeof Node===t?function(e){return e instanceof Node}:function(e){return e&&c(e,i)&&a in e&&c(e.ownerDocument,i)},v=function(t){return e[r](t)&&1===t[a]},h=function(e){return e instanceof Array},u=function(t,i){e[r](i)||(i=l.createTextNode(i)),t.appendChild(i)};return e[n]={},e[s]=v,e[r]=f,"undefined"!=typeof Proxy&&(e.proxy=new Proxy(e,{get:function(t,i){return!(i in e)&&(e[i]=e.bind(null,i)),e[i]}})),e}),function(){var e=crel("div");void 0==e.innerText&&Object.defineProperty(HTMLElement.prototype,"innerText",{get:function(){return this.textContent},set:function(e){this.textContent=e}})}();var ua=window.navigator.userAgent.toLowerCase(),ios=ua.indexOf("iphone")>0||ua.indexOf("ipad")>0||ua.indexOf("ipod")>0,sp=!!(ios||ua.indexOf("android")>0),safari=ua.indexOf("safari")!==-1&&ua.indexOf("chrome")===-1,description=crel("p",{"class":"center"});crel(document.body,description);var loadedmetadata=!1,defalt={w:0,h:0},current={w:0,h:0},isReload=!1,frontCamera=!0,medias={audio:!1,video:{frameRate:{ideal:30,max:30}}};sp&&(medias.video.facingMode={exact:"user"});var initialize=function(){video=crel("video",{autoplay:"",playsinline:""}),crel(document.body,video),video.addEventListener("loadedmetadata",function(e){if(!loadedmetadata){loadedmetadata=!0,sp?video.videoHeight>video.videoWidth?(defalt.w=video.videoWidth,defalt.h=video.videoHeight):(isReload=!0,defalt.h=video.videoWidth,defalt.w=video.videoHeight):(defalt.w=video.videoWidth,defalt.h=video.videoHeight);var t=crel("canvas");sp?(t.width=(video.videoWidth>>2)+15&-16,t.height=(video.videoHeight>>2)+15&-16):(t.width=(video.videoWidth>>1)+15&-16,t.height=(video.videoHeight>>1)+15&-16);var i=t.getContext("2d"),a=crel("canvas",{width:t.width,height:t.height}).getContext("2d");frontCamera&&(a.translate(t.width,0),a.scale(-1,1),video.style.cssText="-moz-transform: scale(-1, 1); -webkit-transform: scale(-1, 1); -o-transform: scale(-1, 1); transform: scale(-1, 1); filter: FlipH;"),crel(document.body,t);var o=Module.cwrap("setup","void",["number","number"]),d=Module.cwrap("draw","void",["number"]);o(t.width,t.height);var n=t.width*t.height<<2,r=new Uint8Array(Module.HEAPU8.buffer,Module._malloc(n),n);t.style.display=video.style.display="block",description.style.display="none";var s=i.getImageData(0,0,t.width,t.height);setTimeout(function(){setInterval(function(){if(0!==defalt.w||0!==current.w||0!==defalt.h||0!==current.h)if(sp&&defalt.w!=video.videoWidth&&defalt.h!=video.videoHeight)t.style.opacity=video.style.opacity=0,description.innerText="Please use Portrait Orientation",description.style.display="block";else{if(sp){if(isReload===!0)return clearInterval(tid),void location.reload();description.style.display="none"}t.style.opacity=video.style.opacity=1;var e={w:document.documentElement.clientWidth,h:document.documentElement.clientHeight};if(e.w!=current.w||e.h!=current.h){current.w=e.w,current.h=e.h;var o=0,n=0;if(e.w-defalt.w>=0&&e.h-defalt.h>=0)t.style.width=video.style.width=defalt.w+"px",t.style.height=video.style.height=defalt.h+"px",o=e.w-defalt.w>>1,n=e.h-defalt.h>>1,t.style.marginLeft=video.style.marginLeft=o+"px",t.style.marginTop=video.style.marginTop=n+"px";else{var l=e.w/defalt.w,c=e.h/defalt.h;if(l<c){t.style.marginLeft=video.style.marginLeft="0px";var f=e.h*l*(1/c)>>0;t.style.width=video.style.width=e.w+"px",t.style.height=video.style.height=f+"px",n=e.h-f>>1,t.style.marginTop=video.style.marginTop=n+"px"}else{t.style.marginTop=video.style.marginTop="0px";var v=e.w*c*(1/l)>>0;t.style.width=video.style.width=v+"px",t.style.height=video.style.height=e.h+"px",o=e.w-v>>1,t.style.marginLeft=video.style.marginLeft=o+"px"}}}a.drawImage(video,0,0,t.width,t.height),r.set(new Uint8Array(a.getImageData(0,0,t.width,t.height).data.buffer)),d(r.byteOffset),s.data.set(r),i.putImageData(s,0,0)}},1e3/30)},50)}})},noUserMedia=function(){ios?(description.innerText="Requirements iOS11 Safari",description.style.display="block"):(description.innerText="Requirements WebRTC",description.style.display="block")},allowUserMedia=function(){description.innerText="Allow WebRTC",description.style.display="block"};safari&&!ios?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?(initialize(),navigator.getUserMedia(medias,function(e){video.srcObject=e},function(e){allowUserMedia()})):noUserMedia()):navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(initialize(),navigator.mediaDevices.getUserMedia(medias).then(function(e){video.srcObject=e})["catch"](function(e){allowUserMedia()})):noUserMedia();</script></body></html>