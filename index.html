<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>w67</title>
   
    <style>
      * {
        margin:0;
        padding:0;
        background-color:#000;
      }
      body {
        width:100%;
        height:100%;
      }
    </style>
  </head>
  <body>
  <script src="libs.js"></script>
  <script src="Vdig.js"></script>
  <script>
      
      var VIDEO_WIDTH  = 512;
      var VIDEO_HEIGHT = 256;
      
      var size = (VIDEO_WIDTH*VIDEO_HEIGHT<<2);

      var buff = new Uint8Array(Module.HEAPU8.buffer,Module._malloc(size),size);
      var vdig = new window.Vdig(VIDEO_WIDTH,VIDEO_HEIGHT,30,function() {
        
        (Module.cwrap("setup","void",[]))(VIDEO_WIDTH,VIDEO_HEIGHT); 
        var draw = (Module.cwrap("draw","void",[]));     
         
        setInterval(function() {          
           buff.set(vdig.get());
           draw(buff.byteOffset);                
        },1000./30.);
        
      });
  </script>
  </body>
</html>
